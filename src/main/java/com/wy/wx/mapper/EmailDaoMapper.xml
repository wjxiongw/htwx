<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.openwan.dao.EmailDao">

	<resultMap type="com.openwan.model.VpnEmail" id="resultList">
		<id property="id" column="id" />
		<result property="email" column="email" />
		<result property="timestampDate" column="timestamp_date" />
		<result property="ipAddress" column="ip_address" />
		<result property="status" column="status" />
		<result property="startDate" column="start_date" />
		<result property="endDate" column="end_date" />

	</resultMap>

	<insert id="insertEmail" parameterType="com.openwan.model.VpnEmail">
		<!-- 具体的sql -->
		<selectKey resultType="java.lang.Integer" order="AFTER"
			keyProperty="id">
			SELECT LAST_INSERT_ID()
		</selectKey>
		
		insert into vpn_email
		(email,timestamp_date,ip_address,status,start_date,end_date )
		values(#{email},#{timestampDate},#{ipAddress},#{status},#{startDate},#{endDate})

	</insert>

	<select id="getVpnEmail" parameterType="java.lang.String"
		resultMap="resultList">
		select * from vpn_email where  email = #{strEmail} or  ip_address = #{strAddr} 
	</select>
	
	<select id="queryAll" resultMap="resultList">
	select * from vpn_email
	</select>

</mapper>